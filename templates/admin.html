<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理后台 - 首页</title>
    <link rel="stylesheet" href="/statics/css/admin.css">
</head>
<body>
    <div class="admin-dashboard">
        <!-- 侧边栏 -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h3>管理系统</h3>
            </div>
            <ul class="sidebar-menu">
                <li><a href="/admin" class="active">首页</a></li>
                <li><a href="/posts">文章管理</a></li>
                <li><a href="/comments">评论管理</a></li>
                <li><a href="/users">用户管理</a></li>
                <li><a href="/admin/settings">系统设置</a></li>
            </ul>
        </aside>
        <!-- 主内容区 -->
        <main class="admin-main">
            <!-- 导航栏 -->
            <nav class="admin-navbar">
                <h1>仪表盘</h1>
                <button class="logout-btn" id="logoutBtn">退出登录</button>
            </nav>

            <!-- 内容区域 -->
            <div class="admin-content">
                <div class="content-header">
                    <h2 id="welcomeMessage">欢迎回来，管理员！</h2>
                </div>

                <!-- 统计信息 -->
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>总用户数</h3>
                        <div class="number">1,234</div>
                    </div>
                    <div class="stat-card">
                        <h3>文章数量</h3>
                        <div class="number">567</div>
                    </div>
                    <div class="stat-card">
                        <h3>今日访问</h3>
                        <div class="number">1,892</div>
                    </div>
                    <div class="stat-card">
                        <h3>在线用户</h3>
                        <div class="number">89</div>
                    </div>
                </div>

                <!-- 最近活动 -->
                <div class="recent-activity">
                    <h3>最近活动</h3>
                    <ul>
                        <li>用户 John Doe 注册了账号 - 2小时前</li>
                        <li>发布了新文章 "Gin框架入门指南" - 5小时前</li>
                        <li>用户 Jane Smith 更新了个人资料 - 1天前</li>
                        <li>系统备份完成 - 1天前</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 从localStorage获取用户信息
            const userinfoStr = localStorage.getItem('userinfo');
            if (userinfoStr) {
                try {
                    const userinfo = JSON.parse(userinfoStr);
                    // 更新欢迎信息，显示用户名
                    document.getElementById('welcomeMessage').textContent = `欢迎回来，${userinfo.user_name}！`;
                } catch (e) {
                    console.error('解析用户信息出错:', e);
                }
            }
            
            // 检查是否有token
            const token = localStorage.getItem('token');
            if (!token) {
                // 如果没有token，跳转到登录页面
                window.location.href = '/login';
            }
        });

        // 退出登录功能
        document.getElementById('logoutBtn').addEventListener('click', function() {
            // 清除本地存储的token和用户信息
            localStorage.removeItem('token');
            localStorage.removeItem('userinfo');
            // 跳转到登录页面
            window.location.href = '/login';
        });
    </script>
</body>
</html>